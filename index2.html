<!DOCTYPE html>
<html>
<head>
    <title>Get Location</title>
</head>
<body>
    <h1>Share Your Location</h1>
    <button onclick="getLocation()">Share Location</button>

    <script>
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(sendLocation, showError);
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        function sendLocation(position) {
            var lat = position.coords.latitude;
            var lng = position.coords.longitude;

            console.log("Latitude: " + lat + ", Longitude: " + lng); // Log des coordonn√©es

            // Remplacez l'URL par votre propre serveur
            var serverUrl = 'http://127.0.0.1:5000/location';
            var xhr = new XMLHttpRequest();
            xhr.open("POST", serverUrl, true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4) {
                    if (xhr.status == 200) {
                        console.log("Location sent successfully!");
                        console.log("Response from server: " + xhr.responseText);
                        alert("Location sent!");
                    } else {
                        console.error("Error: " + xhr.status);
                        alert("Error sending location: " + xhr.status);
                    }
                }
            };
            xhr.send(JSON.stringify({
                latitude: lat,
                longitude: lng
            }));
        }

        function showError(error) {
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    alert("User denied the request for Geolocation.");
                    break;
                case error.POSITION_UNAVAILABLE:
                    alert("Location information is unavailable.");
                    break;
                case error.TIMEOUT:
                    alert("The request to get user location timed out.");
                    break;
                case error.UNKNOWN_ERROR:
                    alert("An unknown error occurred.");
                    break;
            }
        }
    </script>
</body>
</html>
