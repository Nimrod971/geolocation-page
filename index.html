<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Localisations des utilisateurs</title>
<style>
    /* Styles CSS pour la mise en page */
    #locations {
        margin-top: 20px;
        font-family: Arial, sans-serif;
        font-size: 16px;
    }
</style>
</head>
<body>
    <h1>Localisations des utilisateurs</h1>

    <!-- Champ de saisie pour le nom et bouton de confirmation -->
    <div>
        <label for="name">Entrez votre nom :</label>
        <input type="text" id="name" placeholder="Votre nom">
        <button onclick="submitName()">Confirmer</button>
    </div>

    <div id="locations">
        <!-- Ici seront affichées les localisations -->
    </div>

    <!-- Script JavaScript pour récupérer et afficher les localisations -->
    <script>
        document.addEventListener("DOMContentLoaded", (event) => {
            loadLocations();
        });

        function submitName() {
            var name = document.getElementById("name").value;
            if (name) {
                getLocation(name);
            } else {
                alert("Veuillez entrer votre nom.");
            }
        }

        function getLocation(name) {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    showPosition(position, name);
                });
            } else {
                alert("La géolocalisation n'est pas supportée par votre navigateur.");
            }
        }

        function showPosition(position, name) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;

            var locationData = {
                name: name,
                latitude: latitude,
                longitude: longitude
            };

            saveLocation(locationData);
            appendLocation(locationData);
        }

        function saveLocation(locationData) {
            var locations = JSON.parse(localStorage.getItem("locations")) || [];
            locations.push(locationData);
            localStorage.setItem("locations", JSON.stringify(locations));
        }

        function loadLocations() {
            var locations = JSON.parse(localStorage.getItem("locations")) || [];
            locations.forEach(location => {
                appendLocation(location);
            });
        }

        function appendLocation(locationData) {
            var locationElement = document.createElement("p");
            locationElement.textContent = locationData.name + " - Latitude: " + locationData.latitude + ", Longitude: " + locationData.longitude;
            document.getElementById("locations").appendChild(locationElement);
        }
    </script>
</body>
</html>
